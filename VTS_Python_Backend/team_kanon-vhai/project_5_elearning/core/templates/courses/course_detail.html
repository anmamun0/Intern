{% extends "base.html" %}
{% load static %}

{% block title %}{{ course.title }} | E-Learning{% endblock %}

{% block content %}
<div class="min-h-screen ">
  
  <div class="container mx-auto pb-20">
    
    <!-- Back Button -->
    <div class="mb-4">
      <a href="{% url 'courses' %}" class="inline-flex items-center gap-2 text-sm px-3 py-1 bg-white/30 backdrop-blur-sm border border-white/60 rounded-xl hover:bg-white/80 transition-all duration-300 shadow-lg text-gray-700 font-medium">
        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
        </svg>
        Back to Courses
      </a>
    </div>

    <!-- Course Header -->
    <div class="bg-white/60 backdrop-blur-xl border border-white/60 rounded-xl overflow-hidden shadow-2xl mb-8">
      
      <!-- Hero Section with Gradient -->
      <div class="relative bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 p-8 md:p-12">
        <div class="absolute inset-0 opacity-20" style="background-image: url('data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\'%3E%3Cg fill=\'%23ffffff\' fill-opacity=\'0.4\'%3E%3Cpath d=\'M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');"></div>
        
        <div class="relative">
          <!-- Course Badge -->
          <div class="inline-flex items-center gap-2 px-4 py-2 bg-white/20 backdrop-blur-sm rounded-full mb-6">
            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
            <span class="text-sm font-semibold text-white">Active Course</span>
          </div>

          <!-- Course Title -->
          <h1 class="text-3xl md:text-5xl font-bold text-white mb-4 leading-tight">
            {{ course.title }}
          </h1>

          <!-- Course Description -->
          <p class="text-lg text-indigo-100 mb-8 leading-relaxed max-w-3xl">
            {{ course.description }}
          </p>

          <!-- Mentor Info -->
          <div class="flex items-center gap-4 mb-8">
            <div class="w-16 h-16 bg-white/90 rounded-full flex items-center justify-center backdrop-blur-sm shadow-lg">
              <span class="text-xl font-bold text-indigo-600">{{ course.mentor.first_name|first }}{{ course.mentor.last_name|first }}</span>
            </div>
            <div>
              <p class="text-sm text-indigo-200 uppercase tracking-wide">Course Mentor</p>
              <p class="text-xl font-semibold text-white">{{ course.mentor.first_name }} {{ course.mentor.last_name }}</p>
            </div>
          </div>

          <!-- Stats Grid -->
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20">
              <div class="flex items-center gap-2 mb-2">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                </svg>
                <span class="text-indigo-200 text-sm">Chapters</span>
              </div>
              <p class="text-3xl font-bold text-white">{{ course.chapters.count }}</p>
            </div>

            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20">
              <div class="flex items-center gap-2 mb-2">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
                <span class="text-indigo-200 text-sm">Videos</span>
              </div>
              <p class="text-3xl font-bold text-white">
                {% widthratio course.chapters.all|length 1 1 as total %}
                {% for chapter in course.chapters.all %}
                  {{ chapter.contents.count }}{% if not forloop.last %}+{% endif %}
                {% empty %}0{% endfor %}
              </p>
            </div>

            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20">
              <div class="flex items-center gap-2 mb-2">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
                </svg>
                <span class="text-indigo-200 text-sm">Students</span>
              </div>
              <p class="text-3xl font-bold text-white">{{ course.get_student }}</p>
            </div>

            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20">
              <div class="flex items-center gap-2 mb-2">
                <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                </svg>
                <span class="text-indigo-200 text-sm">Rating</span>
              </div>
              <p class="text-3xl font-bold text-white">4.8</p>
            </div>
          </div>
        </div>
      </div>

     
    </div>

    <!-- Course Content Section -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      
      <!-- Main Content - Chapters -->
      <div class="lg:col-span-2 space-y-4" x-data="{ activeChapter: null }">
        
        <div class="bg-white/60 backdrop-blur-xl border border-white/60 rounded-2xl p-6 shadow-xl mb-4">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">Course Curriculum</h2>
          <p class="text-gray-600">{{ course.chapters.count }} chapters • Comprehensive learning path</p>
        </div>

        {% if course.chapters.all %}
          {% for chapter in course.chapters.all %}
          <div class="bg-white/60 backdrop-blur-xl border border-white/60 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300"
               :class="activeChapter === {{ forloop.counter }} ? 'ring-2 ring-indigo-400' : ''">
            
            <!-- Chapter Header -->
            <div @click="activeChapter = activeChapter === {{ forloop.counter }} ? null : {{ forloop.counter }}"
                 class="p-6 cursor-pointer hover:bg-white/80 transition-colors"
                 :class="activeChapter === {{ forloop.counter }} ? 'bg-white/70' : ''">
              
              <div class="flex items-start justify-between gap-4">
                <div class="flex-1">
                  <!-- Chapter Number Badge -->
                  <div class="flex items-center gap-3 mb-3">
                    <span class="px-3 py-1 bg-indigo-100 text-indigo-700 text-sm font-bold rounded-lg">
                      Chapter {{ chapter.order }}
                    </span>
                    <span class="text-sm text-gray-500">{{ chapter.contents.count }} videos</span>
                  </div>

                  <!-- Chapter Title -->
                  <h3 class="text-xl font-bold text-gray-900 mb-2">{{ chapter.title }}</h3>
                  
                  <!-- Chapter Description -->
                  <p class="text-sm text-gray-600 leading-relaxed">{{ chapter.description }}</p>
                </div>

                <!-- Expand Icon -->
                <div class="flex-shrink-0">
                  <div class="p-2 rounded-xl bg-white/50 backdrop-blur-sm hover:bg-white/80 transition">
                    <svg class="w-6 h-6 text-indigo-600 transition-transform duration-300"
                         :class="activeChapter === {{ forloop.counter }} ? 'rotate-180' : ''"
                         fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                  </div>
                </div>
              </div>
            </div>

            <!-- Chapter Contents (Videos) -->
            <div x-show="activeChapter === {{ forloop.counter }}"
                 x-transition:enter="transition ease-out duration-300"
                 x-transition:enter-start="opacity-0 transform -translate-y-4"
                 x-transition:enter-end="opacity-100 transform translate-y-0"
                 class="px-6 pb-6">
              
              <div class="h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent mb-4"></div>

              {% if chapter.contents.all %}
                <div class="space-y-2">
                  {% for content in chapter.contents.all %}
                  <!-- <a href="{{ content.video_url }}" target="_blank" -->
                  <a  
                     class="flex items-center gap-4 p-4 bg-white/60 rounded-xl hover:bg-white/90 transition-all duration-300 border border-white/60 hover:border-indigo-200 group">
                    
                    <!-- Video Icon -->
                    <div class="w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center group-hover:bg-indigo-200 transition-all flex-shrink-0">
                      <svg class="w-6 h-6 text-indigo-600" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/>
                      </svg>
                    </div>

                    <!-- Video Info -->
                    <div class="flex-1 min-w-0">
                      <div class="flex items-center gap-2 mb-1">
                        <span class="px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-semibold rounded">
                          {{ content.order }}
                        </span>
                        <h4 class="font-semibold text-gray-900 group-hover:text-indigo-600 transition truncate">
                          {{ content.title }}
                        </h4>
                      </div>
                      <p class="text-xs text-gray-500">Click to watch video</p>
                    </div>

                    <!-- Arrow Icon -->
                    <svg class="w-5 h-5 text-gray-400 group-hover:text-indigo-600 transition flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                    </svg>
                  </a>
                  {% endfor %}
                </div>
              {% else %}
                <div class="text-center py-8">
                  <svg class="w-16 h-16 text-gray-300 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                  </svg>
                  <p class="text-gray-400 text-sm">No videos available yet</p>
                </div>
              {% endif %}
            </div>
          </div>
          {% endfor %}
        {% else %}
          <!-- No Chapters State -->
          <div class="bg-white/50 backdrop-blur-xl border border-white/60 rounded-2xl p-12 text-center shadow-xl">
            <svg class="w-20 h-20 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
            </svg>
            <h3 class="text-xl font-bold text-gray-700 mb-2">No Chapters Yet</h3>
            <p class="text-gray-500">Course content is being prepared. Check back soon!</p>
          </div>
        {% endif %}
      </div>

      <!-- Sidebar - Course Info -->
      <div class="lg:col-span-1 space-y-6">
        
        <!-- About This Course -->
        <div class="bg-white/60 backdrop-blur-xl border border-white/60 rounded-2xl p-6 shadow-xl">
          <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            About This Course
          </h3>

          <div class="space-y-4">
            <!-- Created Date -->
            <div class="flex items-start gap-3">
              <div class="p-2 bg-indigo-100/80 rounded-lg">
                <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
              </div>
              <div>
                <p class="text-xs text-gray-500 uppercase tracking-wide font-semibold">Created</p>
                <p class="text-sm text-gray-700 font-medium">{{ course.created_at|date:"F j, Y" }}</p>
              </div>
            </div>

            <!-- Last Updated -->
            <div class="flex items-start gap-3">
              <div class="p-2 bg-indigo-100/80 rounded-lg">
                <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
              </div>
              <div>
                <p class="text-xs text-gray-500 uppercase tracking-wide font-semibold">Last Updated</p>
                <p class="text-sm text-gray-700 font-medium">{{ course.created_at|timesince }} ago</p>
              </div>
            </div>

            <!-- Language -->
            <div class="flex items-start gap-3">
              <div class="p-2 bg-indigo-100/80 rounded-lg">
                <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/>
                </svg>
              </div>
              <div>
                <p class="text-xs text-gray-500 uppercase tracking-wide font-semibold">Language</p>
                <p class="text-sm text-gray-700 font-medium">English</p>
              </div>
            </div>

            <!-- Level -->
            <div class="flex items-start gap-3">
              <div class="p-2 bg-indigo-100/80 rounded-lg">
                <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                </svg>
              </div>
              <div>
                <p class="text-xs text-gray-500 uppercase tracking-wide font-semibold">Level</p>
                <p class="text-sm text-gray-700 font-medium">All Levels</p>
              </div>
            </div>
          </div>

          <div class="mt-6 pt-6 border-t border-gray-200  sticky z-30">
            <button class="w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl flex items-center justify-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"/>
              </svg>
              Enroll Course
            </button>
          </div>
        </div>

        <!-- What You'll Learn -->
        <div class="bg-white/60 backdrop-blur-xl border border-white/60 rounded-2xl p-6 shadow-xl">
          <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            What You'll Learn
          </h3>

          <ul class="space-y-3">
            <li class="flex items-start gap-3">
              <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
              <span class="text-sm text-gray-700">Master the fundamentals and advanced concepts</span>
            </li>
            <li class="flex items-start gap-3">
              <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
              <span class="text-sm text-gray-700">Build real-world projects from scratch</span>
            </li>
            <li class="flex items-start gap-3">
              <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
              <span class="text-sm text-gray-700">Get hands-on experience with industry tools</span>
            </li>
            <li class="flex items-start gap-3">
              <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
              <span class="text-sm text-gray-700">Learn best practices and coding standards</span>
            </li>
          </ul>
        </div>
        <!-- Share Course -->
        <div class="bg-white/60 backdrop-blur-xl border border-white/60 rounded-2xl p-6 shadow-xl">
          <h3 class="text-lg font-bold text-gray-900 mb-4">Share This Course</h3>

          <div class="flex gap-2">
            <!-- Facebook -->
            <button
              type="button"
              class="flex-1 p-3 bg-blue-600/90 text-white rounded-xl hover:bg-blue-700 transition-all duration-300 shadow-lg flex items-center justify-center gap-2"
              aria-label="Share on Facebook"
              title="Share on Facebook"
              onclick="shareTo('facebook')"
            >
              <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M22 12.07C22 6.447 17.523 2 12 2S2 6.447 2 12.07c0 5.01 3.657 9.163 8.437 9.93v-7.03H8.078v-2.9h2.36V9.412c0-2.332 1.392-3.62 3.525-3.62.  1.02 0 2.09.18 2.09.18v2.3h-1.174c-1.157 0-1.517.718-1.517 1.455v1.75h2.583l-.413 2.9h-2.17v7.03C18.343 21.233 22 17.08 22 12.07z"/>
              </svg>
              <span class="sr-only">Share on Facebook</span>
            </button>

            <!-- X / Twitter -->
            <button
              type="button"
              class="flex-1 p-3 bg-sky-500/90 text-white rounded-xl hover:bg-sky-600 transition-all duration-300 shadow-lg flex items-center justify-center gap-2"
              aria-label="Share on X"
              title="Share on X"
              onclick="shareTo('x')"
            >
              <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M22 4.01c-.63.28-1.3.48-2 .57.72-.43 1.28-1.1 1.54-1.9-.67.4-1.4.69-2.18.85C18.9 2.64 17.98 2 17 2c-1.74 0-3.15 1.45-2.9 3.14C8.1 5.05 5.03 2.6 2.9.69c-.98 1.69-.48 3.82 1.22 4.9-.57-.02-1.14-.18-1.6-.44v.04C2.46 7.8 4 9.5 6.16 10.02c-.5.14-1.03.18-1.58.06.45 1.45 1.78 2.5 3.38 2.53C7.04 13.57 5.65 14.2 4.16 14.2c-.26 0-.52-.01-.77-.05 1.4.9 3.06 1.42 4.85 1.42 5.82 0 9-4.86 9-9.07v-.41c.62-.44 1.16-.98 1.58-1.6-.56.25-1.17.42-1.8.49z"/>
              </svg>
              <span class="sr-only">Share on X</span>
            </button>

            <!-- LinkedIn -->
            <button
              type="button"
              class="flex-1 p-3 bg-slate-800/90 text-white rounded-xl hover:bg-slate-900 transition-all duration-300 shadow-lg flex items-center justify-center gap-2"
              aria-label="Share on LinkedIn"
              title="Share on LinkedIn"
              onclick="shareTo('linkedin')"
            >
              <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M20.447 20.452h-3.555v-5.569c0-1.328-.023-3.037-1.85-3.037-1.853 0-2.136 1.445-2.136 2.94v5.666H9.352V9.5h3.412v1.499h.049c.476-.9 1.637-1.85 3.369-1.85 3.602 0 4.268 2.371 4.268 5.456v6.347zM5.337 8.001c-1.144 0-2.07-.927-2.07-2.07 0-1.144.926-2.07 2.07-2.07 1.144 0 2.07.926 2.07 2.07 0 1.143-.926 2.07-2.07 2.07zM7.114 20.452H3.56V9.5h3.554v10.952z"/>
              </svg>
              <span class="sr-only">Share on LinkedIn</span>
            </button>

            <!-- Email -->
            <button
              type="button"
              class="flex-1 p-3 bg-emerald-500/90 text-white rounded-xl hover:bg-emerald-600 transition-all duration-300 shadow-lg flex items-center justify-center gap-2"
              aria-label="Share via Email"
              title="Share via Email"
              onclick="shareTo('email')"
            >
              <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M20 4H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm0 4.236-8 4.764-8-4.764V6l8 4.764L20 6v2.236z"/>
              </svg>
              <span class="sr-only">Share via Email</span>
            </button>
          </div>

          <!-- Copy link row -->
          <div class="mt-4 flex items-center gap-3">
            <div class="flex-1">
              <input id="share-url" class="w-full rounded-xl border border-gray-200 px-4 py-2 text-sm bg-white/80" type="text" readonly />
            </div>
            <button
              id="copy-btn"
              class="px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all duration-200 shadow"
              aria-label="Copy link"
              title="Copy link"
              onclick="copyLink()"
            >
              Copy Link
            </button>
          </div>
        </div>
      </div>

<script>
  // Basic share helper — uses current page URL and document.title
  function currentShareData() {
    return {
      url: window.location.href,
      title: document.title || 'Check this course'
    };
  }

  // Fill the input with the current url on load
  document.addEventListener('DOMContentLoaded', () => {
    const input = document.getElementById('share-url');
    if (input) input.value = window.location.href;
  });

  function shareTo(provider) {
    const { url, title } = currentShareData();
    let shareUrl = '';

    switch (provider) {
      case 'facebook':
        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
        break;
      case 'x': // X / Twitter
        // Twitter/X share
        shareUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}`;
        break;
      case 'linkedin':
        shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`;
        break;
      case 'email':
        shareUrl = `mailto:?subject=${encodeURIComponent(title)}&body=${encodeURIComponent(url)}`;
        // for mailto we don't open a popup
        window.location.href = shareUrl;
        return;
      default:
        return;
    }

    // Open in a centered popup
    const width = 650;
    const height = 520;
    const left = (screen.width / 2) - (width / 2);
    const top = (screen.height / 2) - (height / 2);
    window.open(shareUrl, 'shareWindow', `toolbar=0,status=0,width=${width},height=${height},left=${left},top=${top}`);
  }

  // Copy link to clipboard
  async function copyLink() {
    const input = document.getElementById('share-url');
    if (!input) return;
    try {
      await navigator.clipboard.writeText(input.value);
      const btn = document.getElementById('copy-btn');
      const old = btn.innerText;
      btn.innerText = 'Copied!';
      setTimeout(() => (btn.innerText = old), 1400);
    } catch (err) {
      // fallback
      input.select();
      document.execCommand('copy');
      const btn = document.getElementById('copy-btn');
      const old = btn.innerText;
      btn.innerText = 'Copied!';
      setTimeout(() => (btn.innerText = old), 1400);
    }
  }
</script>

              

{% endblock %}